"use strict";function formReviewPost(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments[2],o=e,i=o.id,s=o.author.username||state.user,a=o.specs.brand,r=o.specs.model,l=o.specs.url,d=o.drone.model,c=(o.drone.make,o.title),u=o.content,p=o.specs,m=p.img,f=o.votes||0,E=o.rating,v=getElapsedTime(new Date(o.created)),g=o.specs.link;u=u.map(function(e){return'<p class="paragraph">'+e+"</p>"});for(var _="",R=0;R<E;R++)_+='<span class="star filled-star">&#9734;</span>';var I="";f<0?I="&#45;":f>0&&(I="+");var h='<div class="review">\n                        <div class="post" data-post-id="'+i+'" data-drone-model="'+d+'">\n                            <div class="img-container">\n                                <img class="post-img" src="'+m+'">\n                                <h3>Model: <span class="model">'+r+'</span></h3>\n                                <h5>Manufacturer: <b><span class="maker"><a href="/drones/'+l+'">'+a+'</a></span></b></h5>\n                                <div class="post-rating" data-rating="'+E+'">\n                                    <label>User rating: </label>\n                                    <div class="post-stars">'+_+'</div>\n                                </div>\n                            </div>\n                            <h2 class="post-title">'+c+'</h2>\n                            <hr class="shadow-hr">\n                            <div class="vote-aside">\n                                <div class="arrow-wrap">\n                                    <i class="up-vote-arrow fa fa-arrow-up" aria-hidden="true" data-user-voted="'+t+'"></i>\n                                    <span class="posNeg">'+I+'</span><span class="js-votes">'+f+'</span>\n                                    <i class="down-vote-arrow fa fa-arrow-down" aria-hidden="true" data-user-voted="'+t+'"></i>\n                                </div>\n                            </div>\n                            <div class="content">\n                                '+u.join("")+'\n                            </div>\n                            <hr class="mobile-only post-hr">\n                            <div class="post-attr">\n                                \n                                <div class="c-date-edit-wrap">\n                                    \n                                    <span class="date-posted">submitted  '+v+" "+(/\d/.test(v)?"ago":"")+' by</span> <label class="author-label" for=""><span class="author">'+s+"</span></label>\n                                    "+(n?'<i id="edit-post-icon" class="fa fa-pencil-square-o" aria-hidden="true"></i>':"")+' \n                                </div>\n                            </div>\n\n                            <div class="mobile-vote-aside">\n                                <i class="up-vote-arrow fa fa-arrow-up" data-user-voted="'+t+'" aria-hidden="true"></i>\n                                <span class="posNeg">'+I+'</span><span class="votes js-votes">'+f+'</span>\n                                <i class="down-vote-arrow fa fa-arrow-down" data-user-voted="'+t+'" aria-hidden="true"></i>\n                            </div>\n                            <div class="interactions">\n                                <button class="specs-btn" type="button">\n                                    Specs\n                                    <i class="fa fa-plus" aria-hidden="true"></i>\n                                </button>\n                                <button class="comments-btn" type="button">\n                                    Comments\n                                    <i class="fa fa-comment-o" aria-hidden="true"></i>\n                                </button>\n                            </div>\n                        </div>\n                        <div class="details">\n                            <div class="detail-header">\n                                <h3>Model: <span class="model">'+r+'</span></h3>\n                                <h5>Manufacturer: <span class="maker"><b><a href="/drones/'+l+'">'+a+'</a></b></span></h5>\n                                <div class="amazon-link-wrap">\n                                    <h4>Grab one: <span class="amazon-link">'+g+'</span></h4>\n                                </div>\n                            </div>\n                            <div class="specs">\n                                <dl class="main-specs">\n                                    <dt>Specs</dt>\n                                    <dd>Avg. Price: <span>$'+p.price+"</span></dd>\n                                    <dd>Camera: <span>"+p.camera+'</span></dd>\n                                    <dd>Max Flight Time: <span class="max-flight">'+p.max_flight_time+"</span></dd>\n                                    <dd>Max Range: <span>"+p.max_range+"</span></dd>\n                                    <dd>Max Speed: <span>"+p.max_speed+"</span></dd>\n                                    <dd>GPS?: <span>"+p.gps+"</span></dd>\n                                    <dd>3-axis gimbal: <span>"+p.gimbal+"</span></dd>\n                                    <dd>Flips: <span>"+(p.flips||"NO")+'</span></dd>\n                                </dl>\n\n                                <dl class="mode-specs">\n                                    <dt>Modes</dt>\n                                    <dd>Intelligent Flight: <span>'+p.intelligent_flight+"</span></dd>\n                                    <dd>Avoidance: <span>"+(p.avoidance||"NO")+"</span></dd>\n                                    <dd>Return Home: <span>"+(p.return_home||"NO")+"</span></dd>\n                                    <dd>Follow-Me Mode: <span>"+(p.follow_me_mode||"NO")+"</span></dd>\n                                    <dd>Tracking Mode: <span>"+(p.tracking_mode||"NO")+'</span></dd>\n                                </dl>\n                            </div>\n                        </div>\n                        <div class="comments-container">\n                            <header class="comments-header">\n                                <span class="js-comments-num">0</span> Comments\n                                <i class="fa fa-comment-o" aria-hidden="true"></i>\n                            </header>\n                            <div class="comments-content" data-post-id="'+i+'">\n\n                            </div>\n                            <hr class="shadow-hr">';return state.loggedIn?h+='<form class="comment-form" method="post" action="/posts/comments">\n                                <textarea class="comment-input" rows="" cols="" placeholder="Write comment here . . ." required></textarea>\n                                <button class="comment-btn" type="submit">Comment</button>\n                            </form>':h+='<div class="login-message-container">\n                                <p class="login-message">Must be logged in to write a comment.</p>\n                                <ul class="comment-nav">\n                                    <li><a href="#" class="sub-login">LogIn</a></li>\n                                    <li><a href="#" class="sub-signup">Sign Up</a></li>\n                                </ul>\n                            </div>',h+='</div>\n                    </div>\n                    <hr class="post-hr">'}function getCommentTemplate(e,n,t){var o=e.content,i=e.author.username,s=getElapsedTime(new Date(e.created)),a=e.likes,r=e.postId,l=e.id,d="";a<0?d="&#45;":a>0&&(d="+");var c='<div class="comment gen-comment" id="_'+l+'" data-post-id="'+r+'" data-this-id="'+l+'">\n                    <p class="comment-content">'+o+'</p>\n                    <div class="comment-metadata">\n                        <span class="comment-user">- @'+i+'</span>\n                        <span class="date-posted">'+s+" "+(/\d/.test(s)?"ago":"")+'</span>\n                        <div class="thumbs">\n                            <i class="like fa fa-thumbs-up" aria-hidden="true" data-user-liked="'+t+'"></i>\n                            <i class="dislike fa fa-thumbs-down" aria-hidden="true" data-user-liked="'+t+'"></i>\n                            <span class="posNeg">'+d+'</span><span class="like-dislikes">'+a+'</span>\n                        </div>\n                        <label class="reply-c-btn-label" for="">\n                            <span class="show-reply-comments-txt">comments</span><span class="close-reply-comments-txt hidden">hide</span>\n                            <button class="expand-reply-comments-btn" type="button"></button>\n                        </label>\n                    </div>\n                    <div class="reply-comments-container">\n                        \n                        <div class="reply-comments-content" data-comment-id="'+l+'">\n                            \n                        </div>';return state.loggedIn&&(c+='<form class="reply-comment-form comment-form expand" method="POST" action="/posts/comments">\n                            <textarea class="reply-comment-input comment-input" rows="" cols="" placeholder="Type your reply here . . ." required></textarea>\n                            <button class="reply-comment-btn" type="submit">Reply</button>\n                        </form>'),c+="</div>\n                 </div>"}function getReplyCommentTemplate(e,n,t){var o=e.content,i=e.author.username,s=getElapsedTime(new Date(e.created)),a=e.likes,r=(e.commentId,e._id),l="";return a<0?l="&#45;":a>0&&(l="+"),'<hr class="thin-hr">\n            <div class="reply-comment" data-this-id="'+r+'">\n                <p class="reply-comment-content gen-comment">'+o+'</p>\n                <div class="reply-comment-metadata">\n                    <span class="comment-user">- @'+i+'</span>\n                    <span class="date-posted">'+s+" "+(/\d/.test(s)?"ago":"")+'</span>\n                    <div class="thumbs">\n                        <i class="like fa fa-thumbs-up" aria-hidden="true" data-user-liked="'+t+'"></i>\n                        <i class="dislike fa fa-thumbs-down" aria-hidden="true" data-user-liked="'+t+'"></i>\n                        <span class="posNeg">'+l+'</span><span class="like-dislikes">'+a+"</span>\n                    </div>\n                </div>\n            </div>"}function getDetailPageSpecsTemplate(e){return'<li>\n                <dl class="main-specs">\n                    <dt>Specs</dt>\n                    <dd>Avg. Price: <span>$'+e.price+"</span></dd>\n                    <dd>Camera: <span>"+e.camera+'</span></dd>\n                    <dd>Max Flight Time: <span class="">'+e.max_flight_time+"</span></dd>\n                    <dd>Max Range: <span>"+e.max_range+"</span></dd>\n                    <dd>Max Speed: <span>"+e.max_speed+"</span></dd>\n                    <dd>GPS?: <span>"+e.gps+"</span></dd>\n                    <dd>3-axis gimbal: <span>"+e.gimbal+"</span></dd>\n                    <dd>Flips: <span>"+(e.flips||"NO")+'</span></dd>\n                </dl>\n            </li>\n            <li>\n                <dl class="mode-specs">\n                    <dt>Modes</dt>\n                    <dd>Intelligent Flight: <span>'+e.intelligent_flight+"</span></dd>\n                    <dd>Avoidance: <span>"+(e.avoidance||"NO")+"</span></dd>\n                    <dd>Return Home: <span>"+(e.return_home||"NO")+"</span></dd>\n                    <dd>Follow-Me Mode: <span>"+(e.follow_me_mode||"NO")+"</span></dd>\n                    <dd>Tracking Mode: <span>"+(e.tracking_mode||"NO")+"</span></dd>\n                </dl>\n            </li>"}function getGalleryTemplate(e){var n="https://www.youtube.com/embed",t=e.snippet.thumbnails.medium.url,o=e.id.videoId,i=e.snippet.description;return'<div class="vid-wrap '+(state.isMobile?"mobile-vid":"")+'">\n                <div class="g-video '+(state.isMobile?"mobile-vid":"")+'">\n                    <img class="'+(state.isMobile?"hidden":"")+'" \n                        src="'+t+'" \n                        alt="'+i+'" \n                        data-vid-url="'+n+"/"+o+'?enablejsapi=1">\n                    <iframe class="mobile-vid '+(state.isMobile?"":"hidden")+'"\n                        src="'+n+"/"+o+'?enablejsapi=1" \n                        data-alt="'+i+'" \n                        data-vid-url="'+n+"/"+o+'?enablejsapi=1"></iframe>\n                </div>\n            </div>'}function displayDetailSpecs(e){var n=$('.drone-model[data-slick-index="'+e+'"]'),t=n.attr("data-model"),o=getDroneData(n.attr("data-make"),t),i=getDetailPageSpecsTemplate(o);$(DETAIL_MODEL).text(o.model),$(DETAIL_MAKE).text(o.brand),$(DETAIL_LISTS).html(i),$(AMAZON_LINK).html(o.link),updateDetailVideos(n),$(".main-specs span").add(".mode-specs span").each(function(e){"NO"===$(this).text()&&$(this).css({color:"black"})})}function updateDetailVideos(e){var n="https://www.youtube.com/embed",t=e.attr("data-cased-make")+" "+e.find("label").text();searchYoutubeVideos(t,function(e){state.video.query=t,state.video.nextPageToken=e.nextPageToken;var o=e.items,i=o[0],s=o[1],a=o[2],r=o[3],l=o[4];$(MAIN_VID).attr("src",n+"/"+i.id.videoId+"?enablejsapi=1&html5=1").attr("data-thumbnail",i.snippet.thumbnails.medium.url).attr("data-alt",i.snippet.description),$(G_VID_1).attr("src",""+s.snippet.thumbnails.medium.url).attr("data-vid-url",n+"/"+s.id.videoId+"?enablejsapi=1").attr("alt",s.snippet.description),$(G_VID_2).attr("src",""+a.snippet.thumbnails.medium.url).attr("data-vid-url",n+"/"+a.id.videoId+"?enablejsapi=1").attr("alt",a.snippet.description),$(G_VID_3).attr("src",""+r.snippet.thumbnails.medium.url).attr("data-vid-url",n+"/"+r.id.videoId+"?enablejsapi=1").attr("alt",r.snippet.description),$(G_VID_4).attr("src",""+l.snippet.thumbnails.medium.url).attr("data-vid-url",n+"/"+l.id.videoId+"?enablejsapi=1").attr("alt",l.snippet.description),nextSearchPageHandler()},5)}function videoGalleryHandler(e){var n=e.attr("data-vid-url"),t=e.attr("src"),o=e.attr("alt"),i=$(MAIN_VID).attr("src"),s=$(MAIN_VID).attr("data-thumbnail"),a=$(MAIN_VID).attr("data-alt");$(MAIN_VID).attr("src",n),$(MAIN_VID).attr("data-alt",o),$(MAIN_VID).attr("data-thumbnail",t),e.attr("src",s),e.attr("alt",a),e.attr("data-vid-url",i)}function displayMoreVideos(e){var n=e.map(function(e){return getGalleryTemplate(e)});$(".more-content").append(n.join(""))}function openVideoModal(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";show(VIDEO_BACKDROP),$("body").addClass("no-scroll"),$(MODAL_IFRAME).attr("src",e+"&start="+n+"&autoplay=1"),$(MAIN_VID).attr("src",e),$(MODAL_IFRAME).attr("data-index",t)}function closeVideoModal(){hide(VIDEO_BACKDROP),$("body").removeClass("no-scroll"),$(MODAL_IFRAME).attr("src",""),$(MODAL_IFRAME).attr("data-index","")}function mainModalNavController(e){var n=[$(".g-top-left img"),$(".g-top-right img"),$(".g-bottom-left img"),$(".g-bottom-right img")],t=parseInt($(MODAL_IFRAME).attr("data-index")),o=void 0,i=void 0;if("next"===e){if(3===t)return void alert("Go back to checkout more videos!");-1===t?(o=n[0].attr("data-vid-url"),i=0):o=n[i=t+1].attr("data-vid-url")}else{if(-1===t)return void alert("Go back to checkout more videos!");0===t?(o=$(MAIN_VID).attr("src"),i=-1):o=n[i=t-1].attr("data-vid-url")}$(MODAL_IFRAME).attr("src",o+"&autoplay=1"),$(MODAL_IFRAME).attr("data-index",i)}function modalVideoNavController(e){var n=parseInt($(MODAL_IFRAME).attr("data-index")),t="next"===e?n+1:n-1,o=$(".more-content .vid-wrap:nth-of-type("+(t+1)+")").find("img").attr("data-vid-url");t>$(".more-content img").length-1||t<0?t<0?alert("Click next arrow for more"):alert("Click prev arrow for more"):($(MODAL_IFRAME).attr("src",o+"&autoplay=1"),$(MODAL_IFRAME).attr("data-index",t))}function displayPosts(e){var n=e.map(function(e){var n=getDroneData(e.drone.make,e.drone.model);Object.assign(e,{specs:n});var t=e.usersVoted.find(function(e){return e===state.user}),o=!1;return e.author.username===state.user&&(o=!0),formReviewPost(e,o,t)}).reverse().join("");$(REVIEWS_CONTENT).html(n),$(".main-specs span").add(".mode-specs span").each(function(e){"NO"===$(this).text()&&$(this).css({color:"black"})})}function displayComment(e){if("postId"in e){var n=e.postId,t=getCommentTemplate(e),o=$(COMMENTS_CONTENT+'[data-post-id="'+n+'"]'),i=o.parent(COMMENTS_CONTAINER).find(NUM_COMMENTS),s=parseInt(i.text());s++,i.text(s),o.append(t)}else{var a=e.commentId,r=getReplyCommentTemplate(e);$(".reply-comments-content[data-comment-id="+a+"]").append(r)}}function openLoginSignupModal(e){show(LOGIN_SIGNUP_PAGE),setTimeout(function(){$(LOGIN_SIGNUP_PAGE).addClass("slide"),$(LOGIN_SIGNUP_MODAL).addClass("slide")},200),"login"===e?displayLoginForm():displaySignupForm(),$("body").addClass("no-scroll")}function closeLoginSignupModal(){$(LOGIN_SIGNUP_MODAL).removeClass("slide"),setTimeout(function(){$(LOGIN_SIGNUP_PAGE).removeClass("slide")},200),setTimeout(function(){hide(LOGIN_SIGNUP_PAGE)},800),$("body").removeClass("no-scroll")}function displayLoginForm(){$(LOGIN_SCREEN_BTN).addClass("active-btn"),$(LOGIN_SCREEN_BTN).removeClass("inactive-btn"),$(SIGNUP_SCREEN_BTN).addClass("inactive-btn"),hide(SIGNUP_FORM),show(LOGIN_FORM)}function displaySignupForm(){$(SIGNUP_SCREEN_BTN).removeClass("inactive-btn"),$(SIGNUP_SCREEN_BTN).addClass("active-btn"),$(LOGIN_SCREEN_BTN).addClass("inactive-btn"),hide(LOGIN_FORM),show(SIGNUP_FORM)}function displayWelcomeMessage(e){show(".welcome-message-wrap"),$(".new-user").text(e),$(".login-form .username-input").val(e),$(".login-form .pass-input").focus()}function displaySignupError(e,n){openLoginSignupModal("signup");var t=n;show(SIGNUP_ERROR),"email"===e?$(EMAIL_INPUT).addClass("error").val("").focus():"username"===e?$(".signup-form "+USERNAME_INPUT).addClass("error").val("").focus():"password"===e&&(t=(e=e[0].toUpperCase()+e.slice(1))+": "+n,$(PASS_INPUT).addClass("error"),$(PASS_INPUT)[0].focus()),$(PASS_INPUT).val(""),$(SIGNUP_ERROR+" .error-message").text(t)}function displayLoginError(e){openLoginSignupModal("login"),show(LOGIN_ERROR),$(LOGIN_ERROR+" .error-message").text(e)}function slideInReviewForm(e,n){var t=e.hasClass("mobile-write")?500:0,o=state.isMobile?100:400,i=state.isMobile?0:100;setTimeout(function(){show(n),setTimeout(function(){$(n).addClass("fade-in")},i),setTimeout(function(){$(".review-form-modal").addClass("slide")},o),$("body").addClass("no-scroll")},t)}function slideUpReviewForm(){$(".review-form-modal").removeClass("slide"),$(REVIEW_FORM_SCREEN).removeClass("fade-in"),$(EDIT_REVIEW_FORM_SCREEN).removeClass("fade-in");var e=state.isMobile?400:800;setTimeout(function(){hide(REVIEW_FORM_SCREEN),hide(EDIT_REVIEW_FORM_SCREEN)},e),$("body").removeClass("no-scroll")}function displayEditPostForm(e){var n=e.find(".content").html(),t=e.find(".post-title").text(),o=e.attr("data-post-id"),i=e.attr("data-drone-model"),s=e.find(".post-rating").attr("data-rating");n=n.split('<p class="paragraph">').join("").split("</p>").map(function(e){return e+="\n\n"}).join("").trim(),slideInReviewForm($(EDIT_REVIEW_FORM_SCREEN),EDIT_REVIEW_FORM_SCREEN),$("#edit-title-input").val(t),$("#edit-post-content").val(n),$('.dropdown-options option[value="'+i+'"]').prop("selected",!0),$(EDIT_REVIEW_FORM).attr("data-post-id",o),$(EDIT_REVIEW_FORM).find(".star").each(function(e,n){e>5-s-1&&$(n).addClass("filled-star")})}function fillDroneOptGroups(){$(".dropdown-options").empty();for(var e in drones){var n=[],t=void 0;for(var o in drones[e]){var i=drones[e][o];void 0===t&&(t=i.brand);var s='<option value="'+o+'">'+i.model+"</option>";n.push(s)}var a='<optgroup label="'+t+'">\n                            '+n.join("")+"\n                        </optgroup>";$(".dropdown-options").append(a)}}function toggleComments(e){var n=$(e).parents(REVIEW),t=n.find(COMMENTS_CONTAINER),o=n.find(DETAILS),i=n.find(SPECS_BTN),s=0;o.hasClass("expand")&&(s=100),o.removeClass("expand"),i.removeClass("btn-active"),setTimeout(function(){t.toggleClass("expand"),$(e).toggleClass("btn-active")},s)}function toggleSpecs(e){var n=$(e).parents(REVIEW),t=n.find(DETAILS),o=n.find(COMMENTS_CONTAINER),i=n.find(COMMENTS_BTN),s=0;o.hasClass("expand")&&(s=100),o.removeClass("expand"),i.removeClass("btn-active"),setTimeout(function(){t.toggleClass("expand"),$(e).toggleClass("btn-active")},s)}function toggleMobileMenu(){$(MOBILE_MENU).toggleClass("open"),$(BURGER_WRAP).toggleClass("open"),$(BURGER_ICON).toggleClass("open"),$("body").toggleClass("no-scroll")}function closeMobileMenu(){$(MOBILE_MENU).removeClass("open"),$(BURGER_WRAP).removeClass("open"),$(BURGER_ICON).removeClass("open"),$("body").removeClass("no-scroll")}function hide(){Object.values(arguments).forEach(function(e){$(e).addClass("hidden")})}function show(){Object.values(arguments).forEach(function(e){$(e).removeClass("hidden")})}function droneBannerHandler(e){var n="/drones/"+e.attr("id");location.href=n}function signupFormHandler(e){var n=e.find(".email-input").val(),t=e.find(".username-input").val(),o=e.find(PASS_INPUT).val(),i=e.find(".re-pass-input").val();if(resetLoginForm(),o!==i)alert("passwords did not match."),$(".signup-form "+PASS_INPUT).addClass("error");else{$(".signup-form "+PASS_INPUT).removeClass("error"),closeLoginSignupModal();var s={email:n,username:t,password:o};setTimeout(function(){createNewUser(s)},1e3)}}function resetSignupForm(){$(SIGNUP_FORM+" "+USERNAME_INPUT).removeClass("error"),hide(SIGNUP_ERROR),$(SIGNUP_FORM)[0].reset()}function loginFormHandler(e){var n={username:e.find(".username-input").val(),password:e.find(PASS_INPUT).val()};resetSignupForm(),closeLoginSignupModal(),setTimeout(function(){logUserIn(n)},1e3)}function resetLoginForm(){hide(LOGIN_ERROR),$(LOGIN_FORM+" "+PASS_INPUT).removeClass("error"),$(LOGIN_FORM)[0].reset()}function reviewFormHandler(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=$(e).find(".dropdown-options").find(":selected"),o=t.parent().attr("label").toLowerCase(),i=t[0].value,s=$("#title-input").val(),a=$("#post-content").val(),r=e.find(".filled-star").length,l=e.find(".img-file-input"),d=void 0!==l.val()?l[0].files[0]:null,c={drone:{make:o,model:i},title:s,content:a=a.split("\n\n"),rating:r};void 0===r||0===r?show(".rating-alert"):n?(c.content=$("#edit-post-content").val(),c.content=c.content.split("\n\n"),c.id=e.attr("data-post-id"),c.title=$("#edit-title-input").val(),updatePost(c,d)):createPost(c,d)}function previewReviewHandler(e){var n=e.is(REVIEW_FORM)?REVIEW_FORM:EDIT_REVIEW_FORM,t=$(n)[0].elements,o=$(t.make).find(":selected"),i=getDroneData(o.parent().attr("label"),o[0].value),s=t.title.value,a=t.content.value,r=state.user,l=formReviewPost({title:s,content:a=a.split("\n\n"),author:r,img:i.img,drone:{make:i.brand,model:i.model},specs:i,created:Date.now()});show(PREVIEW_SCREEN),$(PREVIEW_CONTENT).html(l),$(PREVIEW_CONTENT).find(INTERACTIONS).remove()}function commentFormHandler(e){var n=e.attr("action"),t=e.find(".comment-input").val(),o=e.siblings(COMMENTS_CONTENT).attr("data-post-id"),i={url:n,content:t,author:{username:state.user},created:Date.now()};e.hasClass("reply-comment-form")?i.commentId=e.closest(".comment").attr("data-this-id"):void 0!==o&&(i.postId=o),postComment(i),e[0].reset()}function getDroneData(e,n){return e=e.toLowerCase(),drones[e][n]}function filterReviewHandler(){var e=$('input[name="filter"]:checked',FILTER_FORM).val(),n=!1;$(REVIEWS_CONTENT).find(REVIEW).each(function(t,o){$(this).find(".maker").first().text().toLowerCase().indexOf(e)>=0&&(n=!0)}),n?($(REVIEWS_CONTENT).find(REVIEW).each(function(n,t){var o=$(this).find(".maker").first().text().toLowerCase(),i=$(this).prev("hr");-1===o.indexOf(e)?$(this).add(i).hide():$(this).add(i).show()}),$(REVIEW+":visible").first().prev("hr").hide(),show(FILTER_STATUS),$(USER_FILTER).text(droneBrands[e])):(console.log("No Match"),show(FILTER_ALERT))}function searchFilterHandler(){hide(QUERY_ERROR_MESSAGE);var e=$(SEARCH_FILTER).val().trim(),n=e.toLowerCase().split(" "),t=!1;$(REVIEWS_CONTENT).find(REVIEW).each(function(e,o){var i=$(this).find(".maker").first().text().toLowerCase(),s=$(this).find(".model").first().text().toLowerCase(),a=$(this).prev("hr");-1===n.map(function(e){if(i.indexOf(e)>=0||s.indexOf(e)>=0)return 1}).indexOf(1)?$(o).add(a).hide():($(o).add(a).show(),t=!0)}),$(USER_QUERY).text(e),t?(show(QUERY_TEXT),$(REVIEW+":visible").first().prev("hr").hide()):show(QUERY_ERROR_MESSAGE),$(SEARCH_FILTER_FORM)[0].reset()}function commentsFromDbHandler(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments[2];if(n){var o=e[0].postId,i=e.map(function(e){var n=checkIfFromCurrentUser(e);return getCommentTemplate(e,n.byThisUser,n.didUserLike)}),s=i.length,a=$(COMMENTS_CONTENT+'[data-post-id="'+o+'"]');a.parent(COMMENTS_CONTAINER).find(NUM_COMMENTS).text(s),a.append(i.join("")),e.forEach(function(e){getCommentsFromDb(e.id,!1)})}else{var r=t,l=e.map(function(e){var n=checkIfFromCurrentUser(e);return getReplyCommentTemplate(e,n.byThisUser,n.didUserLike)});$(REPLY_COMMENT_CONTENT+'[data-comment-id="'+r+'"]').append(l.join(""))}}function checkIfFromCurrentUser(e){var n=e.usersLiked.find(function(e){return e===state.user}),t=!1;return e.author.username===state.user&&(t=!0),{byThisUser:t,didUserLike:n}}function addImgToPostHandler(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$(REVIEWS).find('.post[data-post-id="'+n+'"]').find(".post-img").attr("src",e.url)}function postsHandler(e){displayPosts(e),e.forEach(function(e){""!==e.imgId&&getFile(e.imgId,e.id),getCommentsFromDb(e.id)})}function voteOnPost(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.attr("data-user-voted")!==state.user){var t=e.siblings(VOTES),o=e.siblings(POSNEG),i=parseInt(t.text()),s=e.closest(".post").attr("data-post-id"),a="";n?++i:--i,i<0?a="&#45;":i>0&&(a="+"),o.html(a),t.text(i),e.attr("data-user-voted",state.user),getPostById(s,function(e){var n=e.usersVoted;n.push(state.user),updatePost({id:s,votes:i,usersVoted:n})})}else alert("Already voted")}function likeDislikeComment(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.attr("data-user-liked")!==state.user){var t=e.siblings(LIKES),o=e.siblings(POSNEG),i=parseInt(t.text()),s=e.closest(".gen-comment").attr("data-this-id"),a="";n?++i:--i,i<0?a="&#45;":i>0&&(a="+"),o.html(a),t.text(i),e.attr("data-user-liked",state.user),e.siblings("i").attr("data-user-liked",state.user),getCommentById(s,function(e){var n=e.usersLiked;n.push(state.user),updateComment({id:s,likes:i,usersLiked:n})})}else alert("Already like")}function fileUploadHandler(e,n){updatePost({id:n,imgId:e.file._id})}function nextSearchPageHandler(){searchYoutubeNextPage(state.video.query,state.video.nextPageToken,function(e){state.video.nextPageToken=e.nextPageToken,displayMoreVideos(e.items)},6)}function createNewUser(e){$.ajax({url:"/users",type:"POST",dataType:"json",data:e,success:function(e){resetSignupForm(),openLoginSignupModal("login"),displayWelcomeMessage(e.username)},error:function(e){var n=e.responseJSON.message,t=e.responseJSON.location;console.log(t+": "+n),show(LOGIN_SIGNUP_PAGE),displaySignupError(t,n)}})}function logUserIn(e){$.ajax({url:"/users/login",type:"POST",dataType:"json",beforeSend:function(n){n.setRequestHeader("Authorization","Basic "+window.btoa(unescape(encodeURIComponent(e.username+":"+e.password))))},success:function(e){e.status?location.reload():displayLoginError(e.message)},error:function(e,n,t){console.log(t)}})}function logUserOut(){$.ajax({url:"/users/logout",type:"GET",dataType:"json",success:function(e){location.reload()},error:function(e,n,t){console.log(t)}})}function getPostsFromDb(){$.ajax({url:"/posts",type:"GET",dataType:"json",success:function(e){postsHandler(e.posts)},error:function(e,n,t){console.log(t)}})}function getPostById(e,n){return $.ajax({url:"/posts/"+e,type:"GET",dataType:"json",success:n,error:function(e,n,t){console.log(t)}})}function createPost(e,n){$.ajax({url:"/posts",type:"POST",dataType:"json",data:e,success:function(e){n?uploadFile(n,e.id):location.reload()},error:function(e,n,t){console.log(t)}})}function updatePost(e,n){var t=e.id;$.ajax({url:"/posts/"+t,type:"PUT",dataType:"json",data:e,success:function(t){n?(""!==t.imgId&&deleteFile(t.imgId),uploadFile(n,t.id)):t.hasOwnProperty("title")&&!e.hasOwnProperty("votes")&&location.reload()},error:function(e,n,t){console.log(t)}})}function deletePost(e){$.ajax({url:"/posts/"+e,type:"DELETE",dataType:"json",success:function(e){location.reload()},error:function(e,n,t){console.log(t)}})}function uploadFile(e,n){var t=new FormData;t.append("file",e),$.ajax({url:"/file/img",type:"POST",data:t,processData:!1,contentType:!1,success:function(e){fileUploadHandler(e,n)},error:function(e,n,t){console.log(t)}})}function getFile(e,n){$.ajax({url:"/file/img/"+e,type:"GET",dataType:"json",success:function(e){addImgToPostHandler(e,n)},error:function(e,n,t){console.log(t)}})}function deleteFile(e){$.ajax({url:"/file/img/"+e,type:"DELETE",success:function(e){},error:function(e,n,t){console.log(t)}})}function getCommentsFromDb(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=void 0;t=n?"/posts/"+e+"/comments":"/posts/comments/"+e+"/comments",$.ajax({url:t,type:"GET",dataType:"json",success:function(t){t.comments.length>0&&(n?commentsFromDbHandler(t.comments):commentsFromDbHandler(t.comments,!1,e))},error:function(e,n,t){console.log(t)}})}function getCommentById(e,n){$.ajax({url:"/posts/comments/"+e,type:"GET",dataType:"json",success:n,error:function(e,n,t){console.log(t)}})}function postComment(e){$.ajax({url:"/posts/comments",type:"POST",dataType:"json",data:e,success:displayComment,error:function(e,n,t){console.log(t)}})}function updateComment(e){var n=e.id;$.ajax({url:"/posts/comments/"+n,type:"PUT",dataType:"json",data:e,success:function(e){console.log("Success"),console.log({res:e})},error:function(e,n,t){console.log(t)}})}function searchYoutubeVideos(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:printToConsole,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;$.ajax({url:YOUTUBE_URL+"/search/",type:"GET",dataType:"json",data:{maxResults:t,key:YOUTUBE_KEY,part:"snippet",q:e},success:n,error:function(e,n,t){console.log(t)}})}function searchYoutubeNextPage(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:printToConsole,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;$.ajax({url:YOUTUBE_URL+"/search/",type:"GET",dataType:"json",data:{maxResults:o,pageToken:n,key:YOUTUBE_KEY,part:"snippet",q:e},success:t,error:function(e,n,t){console.log(t)}})}function printToConsole(e){console.log(e)}function initDroneSlider(){$(DRONE_SLIDER).slick({dots:!1,arrows:!0,infinite:!1,speed:2400,slidesToShow:4,slidesToScroll:4,variableWidth:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:860,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:580,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:415,settings:{speed:2e3,slidesToShow:1,slidesToScroll:1,cssEase:"ease-in-out"}}]})}function initDroneModelsSlider(){$(DRONE_MODELS_SLIDER).slick({dots:!0,arrows:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",responsive:[{breakpoint:440,settings:{dots:!1}}]})}function displayDroneSlider(){$(".slick-slider").css("height","0px"),initDroneSlider(),$(".slick-slider").css("height","")}function displayDroneModelsSlider(){$(".slick-slider").css("height","0px"),initDroneModelsSlider(),$(".slick-slider").css("height","")}function unslick(e){$(e).hasClass("slick-initialized")&&$(e).slick("unslick")}function responsiveReslick(){$(window).resize(function(){parseInt($("body").css("width"));$(DRONE_SLIDER).hasClass("slick-initialized")||initDroneSlider(),$(DRONE_MODELS_SLIDER).hasClass("slick-initialized")||initDroneModelsSlider()})}function smoothScroll(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1200,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;$("body, html").animate({scrollTop:$(e).offset().top-t},n)}function checkSizeHandler(){$(document).ready(function(){checkSize(),$(window).resize(checkSize)})}function checkSize(){parseInt($("body").css("width"))<=414?state.isMobile=!0:state.isMobile=!1,navUserMsgHandler(),window.location.href.indexOf("drones")>=0&&(parseInt($("body").css("width"))<=400?(hide(".more-content img"),show(".more-content iframe"),$(".more-content .vid-wrap").addClass("mobile-vid")):(hide(".more-content iframe"),show(".more-content img"),$(".more-content .vid-wrap").removeClass("mobile-vid")),parseInt($("body").css("width"))<=720?$(GALLERY).prev().is(SHOWCASE)||$(SHOWCASE).detach().insertBefore(GALLERY):$(GALLERY).next().is(SHOWCASE)||$(SHOWCASE).detach().insertAfter(GALLERY))}function navUserMsgHandler(){parseInt($("body").css("width"))<585?show(".mobile-msg"):hide(".mobile-msg"),parseInt($("body").css("width"))>700?limitNavUserMessage():limitNavUserMessage(6)}function limitNavUserMessage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=state.user;n.length>e&&(n=n.slice(0,e-1),$(".user-nav .user-loggedin").text(n+".."))}function fixBannerNav(){$(window).scroll(function(e){var n=$(window).scrollTop();n>=$("main").offset().top?state.isMobile?(n>state.prevScrollPos&&(state.downScrollPos=n),state.downScrollPos-n>=50?($(BANNER_WRAP).addClass("fixed-nav"),$(BANNER_WRAP).fadeIn()):$(BANNER_WRAP).fadeOut(300)):$(BANNER_WRAP).addClass("fixed-nav"):($(BANNER_WRAP).removeClass("fixed-nav"),$(BANNER_WRAP).show()),state.prevScrollPos=n})}function getElapsedTime(e){var n=Date.now()-e,t=Math.floor(n/6e4),o=Math.floor(n/36e5),i=Math.floor(n/864e5),s=Math.floor(n/2629746e3),a=Math.floor(n/31556952e3);return t<60?t<1?"just now":1===t?"a minute ago":t+" minutes":o<24?o+" "+(1===o?"hour":"hours"):i<31?i+" "+(1===i?"day":"days"):s<12?s+" "+(1===s?"month":"months"):a+" "+(1===a?"year":"years")}function hashUrlHandler(){"#reviews"===location.hash&&smoothScroll(REVIEWS)}function checkEndpoint(){var e=window.location.pathname;e.indexOf("drones")>=0?($("#main-header").removeClass("banner").addClass("drone-header"),hide(".landing-greeting"),$('.drone-list a[href="'+e+'"]').addClass("current-page"),$('.drone-list a[href="'+e+'"]').parent().addClass("current-page")):e.indexOf("mission")>=0&&(show(".mission-container"),hide(".greeting"))}function checkIfUserLoggedIn(){state.loggedIn||hide(".logged-in")}function displayCurrentUser(){""!==state.user&&$(".user-loggedin").text(state.user)}function onYouTubeIframeAPIReady(){state.player=new YT.Player("main-iframe",{events:{onReady:function(){console.log("Main Player Ready!!")},onStateChange:function(){console.log("Main Player state changed")}}})}function burgerMenuClick(){$(BURGER_ANCHOR).on("click",function(e){e.preventDefault(),toggleMobileMenu()})}function burgerIconTouchend(){$(BURGER_ANCHOR).on("touchstart",function(e){$(BURGER_ICON).addClass("touchstart"),$(BURGER_ICON).removeClass("touchend")}),$(BURGER_ANCHOR).on("touchend",function(e){$(BURGER_ICON).removeClass("touchstart"),$(BURGER_ICON).addClass("touchend")})}function mobileMenuItemClick(){$(MOBILE_MENU_ITEM).on("click",function(e){e.preventDefault(),$(this).hasClass("coming-soon")||$(this).hasClass("write-review")&&!1===state.loggedIn||closeMobileMenu()})}function reviewsNavItemClick(){$(REVIEWS_NAV_ITEM).on("click",function(e){e.preventDefault(),"/"!==location.pathname&&(window.location="/#reviews"),smoothScroll("#reviews")})}function homeClick(){$(".home").on("click",function(e){e.preventDefault(),window.location="/"})}function welcomeClick(){$(".welcome").on("click",function(e){e.preventDefault(),location.href="/welcome"})}function droneBannerClicks(){$(".drone-make").on("click",function(e){e.preventDefault(),droneBannerHandler($(this))})}function droneModelSlideChange(){$(DRONE_MODELS_SLIDER).on("afterChange",function(e,n,t){e.preventDefault(),$(".more-content").empty(),displayDetailSpecs(t)})}function loginBtnsClick(){$(LOGIN_BTN).on("click",function(e){e.preventDefault(),closeMobileMenu(),openLoginSignupModal("login")}),$(REVIEWS).on("click",SUB_LOGIN_BTN,function(e){e.preventDefault(),closeMobileMenu(),openLoginSignupModal("login")})}function loginFormSubmit(){$(LOGIN_FORM).on("submit",function(e){e.preventDefault(),loginFormHandler($(this))})}function logOutBtnClick(){$(LOGOUT_BTN).on("click",function(e){e.preventDefault();var n=parseInt($("body").css("width"))<585?650:0;setTimeout(function(){logUserOut()},n)})}function signupBtnsClick(){$(SIGNUP_BTN).on("click",function(e){e.preventDefault(),closeMobileMenu(),openLoginSignupModal("signup")}),$(REVIEWS).on("click",SUB_SIGNUP_BTN,function(e){e.preventDefault(),closeMobileMenu(),openLoginSignupModal("signup")})}function signupFormSubmit(){$(SIGNUP_FORM).on("submit",function(e){e.preventDefault(),signupFormHandler($(this))})}function signupScreenClick(){$(SIGNUP_SCREEN_BTN).on("click",function(e){e.preventDefault(),displaySignupForm()})}function loginScreenClick(){$(LOGIN_SCREEN_BTN).on("click",function(e){e.preventDefault(),displayLoginForm()})}function signupLoginCloseClick(){$(window).on("click",function(e){e.target!==$(LOGIN_SIGNUP_PAGE)[0]&&e.target!==$(LOGIN_SIGNUP_X)[0]||closeLoginSignupModal()})}function asideFilterBtnHover(){$(ASIDE_BTN).mouseenter(function(e){e.preventDefault(),$(ASIDE_CONTAINER).addClass("slide"),$(".aside-chevron").addClass("flip")}),$(ASIDE_BTN).on("click",function(e){e.preventDefault(),$(ASIDE_CONTAINER).removeClass("slide"),$(".aside-chevron").removeClass("flip")})}function searchFilterFormSubmit(){$(SEARCH_FILTER_FORM).submit(function(e){e.preventDefault(),hide(FILTER_ALERT,FILTER_STATUS),searchFilterHandler()})}function clearAsideFiltersClick(){$(".clear-btn").on("click",function(e){e.preventDefault(),console.log("click"),hide(FILTER_ALERT,FILTER_STATUS,QUERY_ERROR_MESSAGE,QUERY_TEXT),$(REVIEW).add($(".post-hr")).show(),$("#radio-filter-form")[0].reset()})}function filterBtnClick(){$(FILTER_FORM).submit(function(e){e.preventDefault(),hide(FILTER_ALERT,QUERY_ERROR_MESSAGE,QUERY_TEXT),filterReviewHandler()})}function writeReviewNavClick(){$(WRITE_REVIEW_NAV).on("click",function(e){e.preventDefault(),state.loggedIn?slideInReviewForm($(this),REVIEW_FORM_SCREEN):alert("Must be logged in!")})}function closeReviewFormClick(){$(CLOSE_BTN).on("click",function(e){e.preventDefault(),slideUpReviewForm()})}function videoUploadClick(){$(".video-file-input").on("click",function(e){e.preventDefault(),alert("Video uploads coming soon!")})}function starClick(){$(".star").on("click",function(e){e.preventDefault(),$(this).siblings(".star").addBack().removeClass("filled-star"),$(this).nextAll().addBack().addClass("filled-star")})}function previewBtnClick(){$(PREVIEW_BTN).on("click",function(e){e.preventDefault(),previewReviewHandler($(this).closest("form"))})}function previewCloseBtnClick(){$(PREIVEW_CLOSE_BTN).on("click",function(e){e.preventDefault(),hide(PREVIEW_SCREEN)})}function editPostIconClick(){$(REVIEWS).on("click",EDIT_POST_ICON,function(e){e.preventDefault(),displayEditPostForm($(this).closest(".post"))})}function reviewFormSubmit(){$(REVIEW_FORM).submit(function(e){e.preventDefault(),reviewFormHandler($(this))})}function editReviewFormSubmit(){$(EDIT_REVIEW_FORM).submit(function(e){e.preventDefault(),reviewFormHandler($(this),!0)})}function commentBtnClick(){$(REVIEWS).on("click",COMMENTS_BTN,function(e){e.preventDefault(),toggleComments($(this))})}function deletePostModalBtnClick(){$(DELETE_POST_MODAL_BTN).on("click",function(e){e.preventDefault(),show(DELETE_POST_MODAL),$(EDIT_REVIEW_FORM_SCREEN+" .review-form-modal").addClass("faded")})}function deletePostBtnClick(){$(DELETE_POST_BTN).on("click",function(e){e.preventDefault(),deletePost($(this).closest(EDIT_REVIEW_FORM).attr("data-post-id"))})}function goBackBtnClick(){$(GO_BACK_BTN).on("click",function(e){e.preventDefault(),$(EDIT_REVIEW_FORM_SCREEN+" .review-form-modal").removeClass("faded"),hide(DELETE_POST_MODAL)})}function upVoteClick(){$(REVIEWS).on("click",UPVOTE_ARROW,function(e){e.preventDefault(),state.loggedIn?voteOnPost($(this)):alert("Must be logged in")})}function downVoteClick(){$(REVIEWS).on("click",DOWNVOTE_ARROW,function(e){e.preventDefault(),state.loggedIn?voteOnPost($(this),!1):alert("Must be logged in")})}function commentLikeClick(){$(REVIEWS).on("click",LIKE,function(e){e.preventDefault(),state.loggedIn?likeDislikeComment($(this)):alert("Must be logged in")})}function commentDislikeClick(){$(REVIEWS).on("click",DISLIKE,function(e){e.preventDefault(),state.loggedIn?likeDislikeComment($(this),!1):alert("Must be logged in")})}function commentFormSubmit(){$(REVIEWS).on("submit",COMMENT_FORM,function(e){e.preventDefault(),state.loggedIn?commentFormHandler($(this)):console.log("Must be logged in")})}function replyCommentFormSubmit(){$(REVIEWS).on("submit",REPLY_COMMENT_FORM,function(e){e.preventDefault(),state.loggedIn?commentFormHandler($(this)):console.log("Must be logged in")})}function replyCommentsArrowClick(){$(REVIEWS).on("click",".expand-reply-comments-btn",function(e){e.preventDefault(),$(this).closest(".comment").find(".reply-comments-container").toggleClass("expand"),$(this).toggleClass("open"),$(this).siblings().toggleClass("hidden")})}function specsBtnClick(){$(REVIEWS).on("click",SPECS_BTN,function(e){e.preventDefault(),toggleSpecs($(this))})}function expandArrowClick(){$(EXPAND_ARROW).on("click",function(e){e.preventDefault();var n=Math.floor(state.player.getCurrentTime()),t=$(MAIN_VID).attr("src");state.expanded=!0,openVideoModal(t,n,-1)})}function closeVideoModalClick(){$(V_CLOSE_ICON).on("click",function(e){e.preventDefault(),state.expanded=!1,closeVideoModal()})}function nextVidBtnClick(){$(".next-vid-btn").on("click",function(e){e.preventDefault(),state.expanded?mainModalNavController("next"):modalVideoNavController("next")})}function prevVidBtnClick(){$(".prev-vid-btn").on("click",function(e){e.preventDefault(),state.expanded?mainModalNavController("prev"):modalVideoNavController("prev")})}function videoGalleryClicks(){$(G_IMG).on("click",function(e){e.preventDefault(),videoGalleryHandler($(this))})}function moreVideoGalleryClicks(){$(".more-content").on("click",G_IMG,function(e){e.preventDefault(),openVideoModal($(this).attr("data-vid-url"),0,$(".more-content .g-video img").index(this))})}function openMoreVideosBtnClick(){$(".more-btn").on("click",function(e){e.preventDefault();var n=$(this);$(".more-content-container").toggleClass("slide"),n.toggleClass("open"),n.hasClass("open")?n.text("Close"):setTimeout(function(){n.text("Checkout More")},150)})}function getMoreVideosIconClick(){$(MORE_ICON).on("click",function(e){e.preventDefault(),nextSearchPageHandler()})}function toTopClick(){$(TOP_TOP_ARROW).on("click",function(e){e.preventDefault(),smoothScroll("#main-header",300)})}function newsClick(){$(".coming-soon").on("click",function(e){e.preventDefault(),alert("RSS news feed coming soon")})}function navMenuEvents(){burgerMenuClick(),burgerIconTouchend(),mobileMenuItemClick(),reviewsNavItemClick(),homeClick(),loginBtnsClick(),signupBtnsClick(),logOutBtnClick(),droneBannerClicks(),toTopClick(),newsClick(),welcomeClick()}function signupLoginFormEvents(){signupScreenClick(),loginScreenClick(),signupLoginCloseClick(),signupFormSubmit(),loginFormSubmit()}function writeReviewFormEvents(){writeReviewNavClick(),previewBtnClick(),previewCloseBtnClick(),closeReviewFormClick(),starClick(),reviewFormSubmit(),editReviewFormSubmit(),deletePostModalBtnClick(),deletePostBtnClick(),goBackBtnClick(),videoUploadClick()}function asideEvents(){asideFilterBtnHover(),clearAsideFiltersClick(),filterBtnClick(),searchFilterFormSubmit()}function reviewEvents(){commentBtnClick(),specsBtnClick(),commentFormSubmit(),upVoteClick(),downVoteClick(),commentLikeClick(),commentDislikeClick(),replyCommentsArrowClick(),editPostIconClick()}function detailPageClicks(){expandArrowClick(),nextVidBtnClick(),prevVidBtnClick(),closeVideoModalClick(),openMoreVideosBtnClick(),getMoreVideosIconClick(),videoGalleryClicks(),moreVideoGalleryClicks()}function init(){getPostsFromDb(),displayDroneSlider(),displayDroneModelsSlider(),droneModelSlideChange(),displayCurrentUser(),checkIfUserLoggedIn(),limitNavUserMessage(),location.href.indexOf("drones")>=0&&displayDetailSpecs(0)}function utils(){fixBannerNav(),fillDroneOptGroups(),responsiveReslick(),checkSizeHandler(),hashUrlHandler(),checkEndpoint()}var state={loggedIn:!1,user:"",isMobile:!1,player:null,expanded:!1,video:{query:"",nextPageToken:""},prevScrollPos:0,downScrollPos:0},BANNER_WRAP=".banner-wrap",BURGER_ANCHOR=".burger-anchor",BURGER_WRAP=".burger-icon-wrap",BURGER_ICON="#burger-icon",MOBILE_MENU=".mobile-menu",MOBILE_MENU_ITEM=".mobile-menu li",REVIEWS_NAV_ITEM=".reviews",LOGIN_BTN=".login",SIGNUP_BTN=".signup",LOGOUT_BTN=".logout",LOGIN_SIGNUP_PAGE="#login-signup",LOGIN_SIGNUP_MODAL=".login-signup-container",SIGNUP_FORM=".signup-form",LOGIN_FORM=".login-form",SIGNUP_SCREEN_BTN=".signup-screen-btn",LOGIN_SCREEN_BTN=".login-screen-btn",LOGIN_SIGNUP_X="#login-signup-x",PASS_INPUT=".pass-input",EMAIL_INPUT=".email-input",USERNAME_INPUT=".username-input",SIGNUP_ERROR=".signup-error",LOGIN_ERROR=".login-error",REVIEW_FORM_SCREEN="#review-form-screen",EDIT_REVIEW_FORM_SCREEN="#edit-review-form-screen",REVIEW_FORM="#review-form",EDIT_REVIEW_FORM="#edit-review-form",CLOSE_BTN=".close-btn",WRITE_REVIEW_NAV=".write-review",DELETE_POST_MODAL_BTN=".delete-post-modal-btn",DELETE_POST_MODAL=".delete-confirm-modal",DELETE_POST_BTN=".delete-post-btn",GO_BACK_BTN=".go-back-btn",PREVIEW_SCREEN="#review-post-preview",PREVIEW_CONTENT=".preview-content",PREVIEW_BTN=".preview-btn",PREIVEW_CLOSE_BTN=".preview-close-btn",INTERACTIONS=".interactions",DRONE_SLIDER=".drone-slider",DRONE_MODELS_SLIDER=".drone-models-slider",DETAIL_MAKE=".detail-make",DETAIL_MODEL=".detail-model",DETAIL_LISTS=".detail-lists",AMAZON_LINK=".amazon-link",MAIN_VID=".main-video iframe",G_VID_1=".g-top-left img",G_VID_2=".g-top-right img",G_VID_3=".g-bottom-left img",G_VID_4=".g-bottom-right img",G_IMG=".g-video img",EXPAND_ARROW=".main-video-wrap .fa.fa-expand",V_CLOSE_ICON=".v-modal-close.fa.fa-times",VIDEO_BACKDROP=".video-backdrop",MODAL_IFRAME=".frame-wrap iframe",MORE_ICON=".more-icon.fa",SHOWCASE=".showcase-wrap",GALLERY=".video-gallery",ASIDE_BTN=".aside-slide-btn",ASIDE_CONTAINER=".aside-container",SEARCH_FILTER_FORM="#search-filter-form",SEARCH_FILTER=".search-filter",QUERY_TEXT=".query-text",USER_QUERY=".js-user-query",QUERY_ERROR_MESSAGE=".query-error-message",FILTER_FORM="#radio-filter-form",USER_FILTER=".js-user-filter",FILTER_STATUS=".filter-status",FILTER_ALERT=".filter-alert",FILTER_BTN=".filter-btn",CLEAR_BTN=".clear-btn",REVIEWS="#reviews",REVIEWS_CONTAINER="#reviews-container",REVIEWS_CONTENT="#reviews-content",REVIEW=".review",DETAILS=".details",SPECS_BTN=".specs-btn",EXPAND=".expand",UPVOTE_ARROW=".up-vote-arrow",DOWNVOTE_ARROW=".down-vote-arrow",VOTES=".js-votes",LIKE=".like",DISLIKE=".dislike",LIKES=".like-dislikes",POSNEG=".posNeg",EDIT_POST_ICON="#edit-post-icon",COMMENTS_BTN=".comments-btn",COMMENTS_CONTAINER=".comments-container",COMMENT_BTN=".comment-btn",COMMENTS_CONTENT=".comments-content",COMMENT_FORM=".comment-form",COMMENT_INPUT=".comment-input",NUM_COMMENTS=".js-comments-num",REPLY_COMMENT_FORM=".reply-comment-form",REPLY_COMMENT_INPUT=".reply-comment-input",REPLY_COMMENT_CONTENT=".reply-comments-content",SHOW_REPLY_COMMENTS_TXT=".show-reply-comments-txt",CLOSE_REPLY_COMMENTS_TXT=".close-reply-comments-txt",SUB_SIGNUP_BTN=".sub-signup",SUB_LOGIN_BTN=".sub-login",TOP_TOP_ARROW=".to-top",YOUTUBE_KEY="AIzaSyCSyc7hnCXopqsh5Z9HlklFAK3gvteRMAY",YOUTUBE_URL="https://www.googleapis.com/youtube/v3";$(function(){utils(),navMenuEvents(),signupLoginFormEvents(),writeReviewFormEvents(),asideEvents(),reviewEvents(),detailPageClicks(),init()});